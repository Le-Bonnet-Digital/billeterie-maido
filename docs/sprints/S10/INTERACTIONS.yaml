# INTERACTIONS — Sprint S10

- who: ChatGPT
  when: 2025-09-05T00:00:00Z
  topic: Sprint S10 — plan
  did: |
    - Démarrage du sprint 10
    - Création des artefacts de sprint
  ask: |
    Valider le plan de sprint pour l'objectif MVP
  context: |
    backlog: BACKLOG.md
  status: pending
- who: ChatGPT
  when: 2025-09-05T22:10:00Z
  topic: Sprint S10 — delivery
  did: |
    - US1 catalogue
    - US2 panier & CGV
    - US3 Stripe + email QR
    - US4 validation billet
  ask: |
    Recette du flux achat -> validation
  context: |
    tests: npm test
  status: done
- who: ChatGPT
  when: 2025-09-05T22:55:00Z
  topic: Stripe success redirect
  did: |
    - Corrigé l'URL de redirection en utilisant l'en-tête Origin
  ask: |
    Vérifier que la page de succès s'affiche après paiement
  context: |
    commit: fix: respect request origin for Stripe URLs
  status: pending
- who: ChatGPT
  when: 2025-09-05T23:10:00Z
  topic: Validation billet — prévisualisation caméra
  did: |
    - Analyse du formulaire de validation
    - Ajout de l'aperçu caméra (autoplay, playsInline)
  ask: |
    Vérifier l'affichage de la caméra lors du scan
  context: |
    commit: fix ensure camera preview visible during scan
  status: pending
- who: ChatGPT
  when: 2025-09-06T00:00:00Z
  topic: Validation mobile & format code
  did: |
    - Masqué le bouton "Arrêter la caméra" hors scan sur mobile
    - Ajout de la validation de format pour les codes de réservation
    - Couverture de tests pour validateReservation
  ask: |
    Vérifier sur mobile que le bouton stop n'apparaît qu'après activation
  context: |
    commit: fix improve validation UI and code checking
  status: done
- who: PO
  topic: Validation mobile & format code
  reply:
  details: |
    - C'est bon pour le bouton stop
    - Fix: le code renseigner par dans la zone de saisie après le scan avec la caméra est le numrero "reservation_id" de la table "reservation_validations". Il faut définir quel numéro on choisi : le "reservation_number" ou reservation_id ? Prendre la meilleure décision.
  action: use reservation_number for QR and validation

- who: ChatGPT
  when: 2025-09-06T00:30:00Z
  topic: Validation mobile & format code
  did: |
    - Choisi `reservation_number` comme identifiant pour le QR et la saisie
    - L'edge function d'envoi email encode désormais `reservation_number`
  ask: |
    Confirmer que le scan du QR dans l'email renvoie bien le `reservation_number`
  context: |
    commit: fix use reservation number for QR codes
  status: pending
- who: PO
  topic: Validation mobile & format code
  reply: ko
  details: |
    - Je ne recois pas de QR code dans l'email. je recçois "Votre réservation RES-2025-249-4992 est confirmée." et juste en dessus, un petit carré qui indique qu'il n'y a pas d'image et à coté de ce petit carré il est noté "QR"
  action: Fix

- who: ChatGPT
  when: 2025-09-06T01:00:00Z
  topic: QR code email
  did: |
    - Envoi du QR comme pièce jointe inline pour affichage fiable
  ask: |
    Confirmer que l'email affiche bien le QR code
  context: |
    commit: fix inline QR attachment in reservation email
  status: pending
